<div class="pokemon-search">
  <div class="search-input">
    <input
      type="text"
      id="pokemon-input"
      placeholder="Escribe el nombre de un Pokémon..."
    />
    <button id="search-btn">Buscar</button>
  </div>

  <div id="pokemon-result" class="pokemon-result">
    <p>Busca un Pokémon para ver su información</p>
  </div>
</div>

<style>
  .pokemon-search {
    max-width: 500px;
    margin: 0 auto;
  }

  .search-input {
    display: flex;
    gap: 0.5rem;
    margin-bottom: 1.5rem;
  }

  #pokemon-input {
    flex: 1;
    padding: 0.75rem;
    border: 1px solid var(--cristal);
    background: transparent;
    color: var(--luz);
    border-radius: var(--radius);
    font-size: 1rem;
  }

  #pokemon-input:focus {
    outline: none;
    border-color: var(--oro);
    box-shadow: 0 0 0 2px rgba(212, 175, 55, 0.2);
  }

  #search-btn {
    padding: 0.75rem 1.5rem;
    background: var(--cristal);
    color: var(--abismo);
    border: none;
    border-radius: var(--radius);
    cursor: pointer;
    font-weight: 500;
    transition: all var(--transition);
  }

  #search-btn:hover {
    background: transparent;
    color: var(--cristal);
    border: 1px solid var(--cristal);
  }

  .pokemon-result {
    text-align: center;
    padding: 1.5rem;
    border: 1px solid rgba(100, 255, 218, 0.2);
    border-radius: var(--radius);
    background: rgba(30, 58, 95, 0.2);
  }

  .pokemon-card {
    display: grid;
    grid-template-columns: auto 1fr;
    gap: 1rem;
    align-items: center;
    text-align: left;
  }

  .pokemon-image {
    width: 100px;
    height: 100px;
    background: rgba(100, 255, 218, 0.1);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .pokemon-image img {
    width: 80px;
    height: 80px;
  }

  .pokemon-info h3 {
    color: var(--cristal);
    margin-bottom: 0.5rem;
    text-transform: capitalize;
  }

  .pokemon-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
    gap: 0.5rem;
    margin-top: 1rem;
  }

  .stat {
    text-align: center;
    padding: 0.5rem;
    background: rgba(100, 255, 218, 0.1);
    border-radius: var(--radius);
  }

  .stat-name {
    font-size: 0.8rem;
    opacity: 0.8;
  }

  .stat-value {
    font-weight: bold;
    color: var(--oro);
  }

  .loading {
    color: var(--oro);
  }

  .error {
    color: #ff6b6b;
  }
</style>

<script>
  const input = document.getElementById("pokemon-input") as HTMLInputElement;
  const searchBtn = document.getElementById("search-btn");
  const result = document.getElementById("pokemon-result");

  async function searchPokemon() {
    const pokemonName = input.value.toLowerCase().trim();
    if (!pokemonName) return;

    if (result) result.innerHTML = '<p class="loading">Buscando...</p>';

    try {
      const response = await fetch(
        `https://pokeapi.co/api/v2/pokemon/${pokemonName}`
      );

      if (!response.ok) {
        throw new Error("Pokémon no encontrado");
      }

      const pokemon = await response.json();

      if (result) {
        result.innerHTML = `
          <div class="pokemon-card">
            <div class="pokemon-image">
              <img src="${pokemon.sprites.front_default}" alt="${pokemon.name}" />
            </div>
            <div class="pokemon-info">
              <h3>${pokemon.name}</h3>
              <p><strong>Altura:</strong> ${pokemon.height / 10} m</p>
              <p><strong>Peso:</strong> ${pokemon.weight / 10} kg</p>
              <p><strong>Tipo:</strong> ${pokemon.types.map((type: any) => type.type.name).join(", ")}</p>
              <div class="pokemon-stats">
                ${pokemon.stats
                  .map(
                    (stat: any) => `
                  <div class="stat">
                    <div class="stat-name">${stat.stat.name}</div>
                    <div class="stat-value">${stat.base_stat}</div>
                  </div>
                `
                  )
                  .join("")}
              </div>
            </div>
          </div>
        `;
      }
    } catch (error) {
      if (result) {
        result.innerHTML =
          '<p class="error">Pokémon no encontrado. Verifica el nombre e intenta de nuevo.</p>';
      }
    }
  }

  searchBtn?.addEventListener("click", searchPokemon);
  input?.addEventListener("keypress", (e) => {
    if (e.key === "Enter") {
      searchPokemon();
    }
  });
</script>
